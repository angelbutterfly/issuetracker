<app>
<div class={ debug: opts.debug }>
  <pre style='display:none'>
    { JSON.stringify(store, null, 2) }
  </pre>
  <div class='app'>
    <form onsubmit={ add }>
      <input type="text" class="text" value="" name="projectTitle">
      <button>Add</button>
    </form>
    <ul each={ projects }>
      <project opts= { title }/>
    </ul>
  </div>
</div>
  <script>
    this.projects = opts.projects;
    add(e) {
      this.projects.push({title: this.projectTitle.value, issues: []})
      this.projectTitle.value = '';
    }
    remove(e) {
      var project = e.item;
      var index = this.projects.indexOf(project);
      this.projects.splice(index, 1);
    }
  </script>
  <style type="text/css">
    .debug pre {
      display: block !important;
      float:left;
      width: 400px;
      font-size: 10px;
    }
    .debug .app {
      margin-left: 450px;
    }
  </style>
</app>

<project>
  <li>
    <a href="#" onclick={ parent.remove } data={ this }>X</a> { title }
    <form onsubmit={ add }>
      <input type="text" class="text" value="" name="issueTitle">
      <button>Add</button>
    </form>
    <ul each={ this.issues }>
      <issue/>
    </ul>
  </li>
  <script>
    add(e) {
      this.issues.push({title: this.issueTitle.value})
      this.issueTitle.value = '';
    }
    remove(e) {
      var issue = e.item;
      var index = this.issues.indexOf(issue);
      this.issues.splice(index, 1);
      this.parent.update();
    }
  </script>
</project>

<issue>
  <li>
    <a href="#" onclick={ parent.remove } data={ this }>X</a> { title }
  </li>
  </script>
</issue>
